/* tslint:disable */
require('dotenv').config()
import MigrationRunner from 'application/MigrationRunner';
import Server from "./Server";
import MiddlewareSequence from "../application/MiddlewareSequence";
import MiddlewareSequencePrivate from "../application/MiddlewareSequencePrivate";
import Initializer from "../application/Initializer";
import logger from "framework/Logger";

// https://github.com/nodejs/node/issues/4182
process.on("SIGINT", function() {
    process.exit();
});

Initializer().then(MigrationRunner).then(function() {
	logger.info("Data Migrated!");
	const ApplicationServer = new Server(MiddlewareSequence, MiddlewareSequencePrivate);
	ApplicationServer.listen(3333);
}).catch((e) => {
    logger.error(e);
});
